<%- include('./partials/header'); -%>
    <% const x=typeof user;%>

        <div>
            <div class="d-flex flex-column">
                <div style="height:80vh;width: 100%;background-image: url(/imgs/landscape/3.jpg);background-repeat: no-repeat;background-position: center;background-size: cover;text-align: center;"
                    id="headPic">
                    <% if(typeof user=="object" ) { %>

                        <div id="welcomeMsg" class="welcomeMsg rounded" style="
                    width: 70vw;
                    color:rgb(255, 255, 255);
                    font-weight:bolder;
                    padding: .5em;
                    background-color: rgba(0, 0, 0, 0.712);
                    position: fixed;
                    top:50%;
                    left:15%;
                    z-index: 9999;
                    opacity: 0;
                    ">
                            <i class="fa fa-close someicon" id="hidewelcomemsg"
                                style="background-color: rgb(185, 184, 184); font-size: 1.5em; padding: 5px;border-radius: 25%; cursor: pointer"></i>


                            <h1 style="color: white;margin-top: 1em;"> Welcome back <%= user.name %>!</h1>

                            <% if(welcomeMsg.hotel==="0" && user.name !="ADMIN" ) { %>

                                <h1 style="color: white;margin-top: 1em;"> You have no active bookings.</h1>


                                <% } else { %>
                                    <% if(user.name !="ADMIN" ) {%>
                                        <h1 style="color: white;margin-top: 1em;"> You soon have a trip planned at <%=
                                                welcomeMsg.hotel %> from <%= welcomeMsg.fromDate %> to <%=
                                                        welcomeMsg.toDate %> in a <%= welcomeMsg.roomType %> room.
                                                            Payable at the hotel Â£<%= welcomeMsg.total %>.</h1>
                                        <%}%>
                                            <% } %>


                        </div>
                        <% } %>

                            <h1 class="rounded show"
                                style="margin:0 auto;width: 50vw;margin-top:25vh;color:rgb(255, 255, 255); font-weight:bolder;padding: .5em; background-color: rgba(0, 0, 0, 0.562);">
                                Out with the daily, in with the wild! <br> Book now!</h1>

                            <div style="width: 95vw;display: flex; justify-content: center;">

                                <div class="mt-4 gap-1 show2"
                                    style="background-color: rgba(255, 0, 0, 0);color: rgba(255, 255, 255, 0.562);display: flex;justify-content: space-between;">

                                    <form action="/findaroom" class="d-flex" id="indexBookingsForm">
                                        <input id="start" name="start" type="date" class="rounded" placeholder="Arrival"
                                            style="box-shadow: 1px 2px 5px 2px #000000db;" required><br>
                                        <input id="end" name="end" type="date" class="rounded" placeholder="Departure"
                                            style="box-shadow: 1px 2px 5px 2px #000000db;" required><br>
                                        <select id="hotel" name="hotel" class="rounded"
                                            style="box-shadow: 1px 2px 5px 2px #000000db;"
                                            onchange="validateAndSubmit()">
                                            <option selected="selected" disabled>Select hotel</option>
                                            <option value="Gloucester">Gloucester</option>
                                            <option value="London">London</option>
                                            <option value="Birmingham">Birmingham</option>
                                            <option value="Manchester">Manchester</option>
                                        </select>
                                    </form>
                                    <script>

                                        function validateAndSubmit() {
                                            document.getElementById('indexBookingsForm').submit();
                                        };
                                    </script>
                                </div>
                            </div>
                </div>
            </div>

            <div class="carousel-container hideme" onload='this.className += " show";'>
                <div class="carousel" id="carousel">
                    <div class="slide hideme">
                        <h1><i class="fa-solid fa-star" style="color: #f5af34;"></i></h1>
                        <h2>High Rating</h2>
                        <h5>4.5 on TripAdvisor from over 10000 reviews!</h5>
                    </div>
                    <div class="slide hideme">
                        <h1><i class="fa-solid fa-ear-listen" style="color: #f5af34;"></i></h1>
                        <h2>Adaptability</h2>
                        <h5>We adapt to any situation!</h5>
                    </div>
                    <div class="slide hideme">
                        <h1><i class="fa-solid fa-clock-rotate-left" style="color: #f5af34;"></i></h1>
                        <h2>Support</h2>
                        <h5>Around the clock support.</h5>
                    </div>
                    <div class="slide hideme">
                        <h1><i class="fa-solid fa-user-shield" style="color: #f5af34;"></i></h1>
                        <h2>Private data</h2>
                        <h5>We dont share your data with anyone.</h5>
                    </div>
                    <div class="slide hideme">
                        <h1><i class="fa-solid fa-wifi" style="color: #f5af34;"></i></h1>
                        <h2>Wifi</h2>
                        <h5>Russians we are not. Free WiFi!</h5>
                    </div>
                </div>

                <button id="left" class="left-arrow arrow">
                    <i class="fa-solid fa-chevron-left" style="color: #f5af34;"></i>
                </button>
                <button id="right" class="right-arrow arrow">
                    <i class="fa-solid fa-chevron-right" style="color: #f5af34;"></i>
                </button>
            </div>

            <div class="text-center" loading="lazy">

                <div class="index card card-body flex-wrap flex-md-row gap-2 justify-content-center m-auto">
                    <img src="/imgs/1.jpg" class="hideme rounded " loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/fronthotel/birmingham.jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/fronthotel/gloucester.jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/fronthotel/london.jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/fronthotel/manchester.jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/other/1 (2).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/other/1 (4).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/rooms/1 (6).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/rooms/1 (4).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/rooms/1 (3).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/rooms/1 (1).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/spa/1 (1).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/spa/1 (2).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                    <img src="/imgs/spa/1 (4).jpg" class="rounded hideme" loading="lazy"
                        style="max-width: 100%; height:auto; max-height: 20vh;">
                </div>

            </div>
            <script defer>
                //carousel

                const slides = document.querySelectorAll(".slide");
                const carousel = document.getElementById("carousel");
                const left = document.getElementById("left");
                const right = document.getElementById("right");
                const progress = document.getElementById("progress");
                const SLIDES_COUNT = slides.length;

                let current_slide = 0;

                left.addEventListener("click", () => {
                    current_slide--;
                    if (current_slide < 0) {
                        current_slide = SLIDES_COUNT - 2;
                    }
                    updateCarouse();
                });

                right.addEventListener("click", () => {
                    current_slide++;
                    if (current_slide > SLIDES_COUNT - 2) {
                        current_slide = 0;
                    }
                    updateCarouse();
                });

                function updateCarouse() {
                    carousel.style.transform = `translateX(${-current_slide * slides[0].offsetWidth / 1.5}px)`;
                    // document.body.style.background = `${slides[current_slide].getAttribute("data-bg")}`; //dynamic bg possibility
                    // progress

                }
            </script>

            <%- include('./partials/footer') -%>

                <script>
                    window.onload = () => {
                        var todaysDate = new Date().toISOString().slice(0, 10);
                        document.getElementById('start').value = todaysDate;
                        document.getElementById("start").setAttribute('min', todaysDate);
                        var tomorrow = new Date();
                        tomorrow.setDate(tomorrow.getDate() + 1);
                        document.getElementById('end').value = tomorrow.toISOString().slice(0, 10);
                        document.getElementById("end").setAttribute('min', tomorrow.toISOString().slice(0, 10));

                    }
                </script>

                <% if(typeof user=="object" ) { %>
                    <script>
                        document.addEventListener('DOMContentLoaded', loadModal, false);

                        function loadModal() {
                            setTimeout(showModal, 500);
                        }

                        function showModal() {
                            document.querySelector('.welcomeMsg').classList.add('show');
                        }

                        document.querySelector('#hidewelcomemsg').addEventListener('click', function () {
                            document.querySelector('.welcomeMsg').classList.remove('show');
                            document.querySelector('.welcomeMsg').classList.add('hide');
                        })
                    </script>
                    <% } %>